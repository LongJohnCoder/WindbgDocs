<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><HTML DIR="LTR" xmlns:MSHelp="http://msdn.microsoft.com/MSHelp">
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>Writing DbgEng Extension Code</TITLE>
<META NAME="ms.locale" content="en-us">
<META NAME="DESCRIPTION" CONTENT="Debugger, Debugger, Design Guide, Writing DbgEng Extension Code"><xml><MSHelp:Keyword Index="A" Term="Extensions_DG_8afbe494-20c4-4b67-9f30-65ef5c9e66fd.xml"/>
<META NAME="MS-HKWD" CONTENT="DbgEng Extensions, writing"></xml><LINK REL="stylesheet" type="text/css" href="backsdk4.css"><SCRIPT src="langref.js"></SCRIPT><style>dd {margin-bottom:0em; margin-left:1.9em; }</style>
<style>.divclass {behavior:url(#default#savehistory);}</style>
<META NAME="save" CONTENT="history">
</HEAD>
<Body topmargin="0">
<DIV STYLE="display:none;"></DIV>
<DIV STYLE="display:none;"></DIV>
<TABLE CLASS="buttonbarshade" CELLSPACING="0" border="0"><TR><TD NOWRAP="true"> </TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING="0">
<TR ID="hdr">
<TD NOWRAP="true" CLASS="runninghead">Debugging Tools for Windows</TD>
</TR>
</TABLE>
<H1><A NAME="Extensions_DG_8afbe494-20c4-4b67-9f30-65ef5c9e66fd.xml"></A>Writing DbgEng Extension Code</H1>
<P><a href="dbg_glossary_e3f0f980-4b88-4e00-934b-0443c9640c06.xml.htm#5f0c1329-ded4-4373-bde8-f2b4e9d8499b">DbgEng extension</a> commands can include any standard C++ code. They can also include the C++ interfaces that appear in the <i>dbgeng.h</i> header file, in addition to the C functions that appear in the <i>wdbgexts.h</i> header file.</P>
<P>If you intend to use functions from <i>wdbgexts.h</i>, you need to define KDEXT_64BIT before <i>wdbgexts.h</i> is included. For example:</P>
<P style="cursor:text; padding:2pt,4pt;font: 100% Courier New, Courier, mono; color: #660000;"><nobr>#define KDEXT_64BIT <BR>#include wdbgexts.h <BR>#include dbgeng.h <BR><BR></nobr></P>
<P>For a full list of interfaces in <i>dbgeng.h</i> that can be used in an extension command, see <a href="clientfns_524def0c-b620-4bb4-a496-0b0080f4df58.xml.htm">Debugger Engine Reference</a>.</P>
<P>For a full list of functions in <i>wdbgexts.h</i> that can be used in an extension command, see <a href="wdbgexts_ref_a074bbf3-80f8-415e-988d-1b45b2e73cc1.xml.htm">WdbgExts Functions</a>. A number of these functions appear in 32-bit versions and 64-bit versions. Typically, the 64-bit versions end in "64" and the 32-bit versions have no numerical ending &#8212; for example, <b>ReadIoSpace64</b> and <b>ReadIoSpace</b>. When calling a <i>wdbgexts.h</i> function from a DbgEng extension, you should always use the function name ending in "64". This is because the <a href="dbg_glossary_e3f0f980-4b88-4e00-934b-0443c9640c06.xml.htm#cc3d62e3-661f-4077-bb5b-189750153eae">debugger engine</a> always uses 64-bit pointers internally, regardless of the target platform.</P>
<P>If you include <i>wdbgexts.h</i> in your DbgEng extension, you should call <a href="idebugcontrol_51215e32-dcd3-440f-92ee-6ff82ae1c8e6.xml.htm"><b>GetWindbgExtensionApis64</b></a> during the initialization of your extension DLL  (see <a href="extensions_ref_e260c42c-8299-4578-8919-3b2167701275.xml.htm"><b>DebugExtensionInitialize</b></a>).</P>
<P class="note"><b>Note</b>  You must not attempt to call any DbgHelp or ImageHlp routines from any debugger extension. Calling these routines is not supported and may cause a variety of problems.</P>
<DIV style="display:yes"></DIV>
<DIV CLASS="footer"><br><A href="dbglegal.htm">© 2009 Microsoft Corporation</A><br><A href="mailto:windbgfb@microsoft.com?subject=documentation feedback [Debugger]: Writing DbgEng Extension Code RELEASE: (December 09, 2009)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AThe WDK team uses the feedback submitted to improve the WDK documentation. We do not use your e-mail address for any other purpose. We will remove your e-mail address from our system after the issue you are reporting has been resolved. While we are working to resolve this issue, we may send you an e-mail message to request more information about your feedback. After the issues have been addressed, we may send you an e-mail message to let you know that your feedback has been addressed.%0A%0AFor more information about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx.
              ">Send feedback on this topic</A><br>Debugging Tools for Windows<br>December 09, 2009<br></DIV>
</Body>
</HTML>
