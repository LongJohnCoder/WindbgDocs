<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><HTML DIR="LTR" xmlns:MSHelp="http://msdn.microsoft.com/MSHelp">
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>GFlags and PageHeap</TITLE>
<META NAME="ms.locale" content="en-us">
<META NAME="DESCRIPTION" CONTENT="Debugger, Debugger, Design Guide, GFlags and PageHeap"><xml><MSHelp:Keyword Index="A" Term="GFlags_dfff1d36-2831-4e62-b8ce-16457d783651.xml"/>
<META NAME="MS-HKWD" CONTENT="GFlags, GFlags and PageHeap">
<META NAME="MS-HKWD" CONTENT="PageHeap (pageheap.exe)"></xml><LINK REL="stylesheet" type="text/css" href="backsdk4.css"><SCRIPT src="langref.js"></SCRIPT><style>dd {margin-bottom:0em; margin-left:1.9em; }</style>
<style>.divclass {behavior:url(#default#savehistory);}</style>
<META NAME="save" CONTENT="history">
</HEAD>
<Body topmargin="0">
<DIV STYLE="display:none;"></DIV>
<DIV STYLE="display:none;"></DIV>
<TABLE CLASS="buttonbarshade" CELLSPACING="0" border="0"><TR><TD NOWRAP="true"> </TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING="0">
<TR ID="hdr">
<TD NOWRAP="true" CLASS="runninghead">Debugging Tools for Windows</TD>
</TR>
</TABLE>
<H1><A NAME="GFlags_dfff1d36-2831-4e62-b8ce-16457d783651.xml"></A>GFlags and PageHeap</H1>
<P>This version of GFlags includes the functionality of PageHeap (<i>pageheap.exe</i>), a tool that enables heap allocation monitoring in Windows. PageHeap enables Windows features that reserve memory at the boundary of each allocation to detect attempts to access memory beyond the allocation.</P>
<P>The page heap options in GFlags let you select <i>standard heap verification</i>, which writes fill patterns at the end of each heap allocation and examines the patterns when the allocations are freed, or <i>full-page heap verification</i>, which places an inaccessible page at the end of each allocation so that the program stops immediately if if accesses memory beyond the allocation. Because full heap verification uses a full page of memory for each allocation, its widespread use can cause system memory shortages.</P><B></B><UL type="disc">
<LI>To enable standard page heap verification for all processes, use <b>gflags /r +hpa</b> or <b>gflags /k +hpa</b>. </LI>
<LI>To enable standard page heap verification for one process, use <b>gflags /p /enable</b> <i>ImageFileName</i>. </LI>
<LI>To enable full page heap verification for one process, use <b>gflags /i </b><i>ImageFileName</i><b> +hpa</b> or <b>gflags /p /enable </b><i>ImageFileName</i> <b>/full</b>. </LI>
</UL>
<P></P>
<P>All page heap settings, except for <b>/k</b>, are stored in the registry and remain effective until you change them.</P>
<P>Use care in interpreting the <b>Enable page heap</b> check box for an image file in the GFlags dialog box. It indicates that page heap verification is enabled for an image file, but it does not indicate whether it is full or standard page heap verification. If the check results from selecting the check box, then full page heap verification is enabled for the image file. However, if the check results from use of the command-line interface, then the check can represent the enabling of either full or standard page heap verification for the image file.</P>
<P>To determine whether full or standard page heap verification is enabled for a program, at the command line, type <b>gflags /p</b>. In the resulting display, <b>traces</b> indicates that standard page heap verification is enabled for the program and <b>full traces</b> indicates that full page heap verification is enabled for the program.</P>
<P></P>
<DIV style="display:yes"></DIV>
<DIV CLASS="footer"><br><A href="dbglegal.htm">© 2009 Microsoft Corporation</A><br><A href="mailto:windbgfb@microsoft.com?subject=documentation feedback [Debugger]: GFlags and PageHeap RELEASE: (December 09, 2009)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AThe WDK team uses the feedback submitted to improve the WDK documentation. We do not use your e-mail address for any other purpose. We will remove your e-mail address from our system after the issue you are reporting has been resolved. While we are working to resolve this issue, we may send you an e-mail message to request more information about your feedback. After the issues have been addressed, we may send you an e-mail message to let you know that your feedback has been addressed.%0A%0AFor more information about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx.
              ">Send feedback on this topic</A><br>Debugging Tools for Windows<br>December 09, 2009<br></DIV>
</Body>
</HTML>
