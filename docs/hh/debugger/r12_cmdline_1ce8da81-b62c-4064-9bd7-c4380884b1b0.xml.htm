<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><HTML DIR="LTR" xmlns:MSHelp="http://msdn.microsoft.com/MSHelp">
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>KD Command-Line Options</TITLE>
<META NAME="ms.locale" content="en-us">
<META NAME="DESCRIPTION" CONTENT="Debugger, Debugger, Design Guide, KD Command-Line Options"><xml><MSHelp:Keyword Index="A" Term="r12_cmdline_1ce8da81-b62c-4064-9bd7-c4380884b1b0.xml"/>
<META NAME="MS-HKWD" CONTENT="command-line options, KD">
<META NAME="MS-HKWD" CONTENT="KD, command-line options"></xml><LINK REL="stylesheet" type="text/css" href="backsdk4.css"><SCRIPT src="langref.js"></SCRIPT><style>dd {margin-bottom:0em; margin-left:1.9em; }</style>
<style>.divclass {behavior:url(#default#savehistory);}</style>
<META NAME="save" CONTENT="history">
</HEAD>
<Body topmargin="0">
<DIV STYLE="display:none;"></DIV>
<DIV STYLE="display:none;"></DIV>
<TABLE CLASS="buttonbarshade" CELLSPACING="0" border="0"><TR><TD NOWRAP="true"> </TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING="0">
<TR ID="hdr">
<TD NOWRAP="true" CLASS="runninghead">Debugging Tools for Windows</TD>
</TR>
</TABLE><a name="HELP_TOPIC_COMMAND_LINE_KD"></a><H1><A NAME="r12_cmdline_1ce8da81-b62c-4064-9bd7-c4380884b1b0.xml"></A>KD Command-Line Options</H1>
<P><P></P>
<P><i>First-time users of KD should begin with the </i><a href="r05_use_start_2a697bbe-caeb-49e4-ad14-ce07699d630b.xml.htm"><i>Debugger Operation</i></a><i> section.</i></P>
<P>The KD command line uses the following syntax.</P>
</P>
<P style="background:#dddddd;cursor:text;padding:2pt,4pt;font: 100% Courier New, Courier, mono;"><nobr><b>kd </b>[ <b>-server</b> <i>ServerTransport</i> | <b>-remote</b> <i>ClientTransport</i> ] <BR>   [-<b>b </b>|<b> </b>-<b>x</b>] [<b>-d</b>] [<b>-bonc</b>] [-<b>m</b>] [-<b>myob</b>] [<b>-lines</b>] [<b>-n</b>] [-<b>r</b>] [-<b>s</b>] <BR>   [<b>-v</b>] [<b>-clines</b> <i>lines</i>] [<b>-failinc</b>] [<b>-noio</b>] [<b>-noshell</b>] <BR>   [<b>-secure</b>] [<b>-sdce</b>] [<b>-ses</b>] [<b>-sicv</b>] [<b>-sins</b>] [<b>-snc</b>] [<b>-snul</b>]<BR>   [<b>-sup</b>] [<b>-sflags 0x</b><i>Number</i>] [<b>-log</b>{<b>a|au|o|ou</b>} <i>LogFile</i>] <BR>   [<b>-a</b><i>Extension</i>] [<b>-zp</b> <i>PageFile</i>] <BR>   [<b>-i</b> <i>ImagePath</i>] [-<b>y</b> <i>SymbolPath</i>]  [<b>-srcpath</b> <i>SourcePath</i>] <BR>   [<b>-k</b> <i>ConnectType</i> | <b>-kl</b> | <b>-kqm</b> | <b>-kx</b> <i>ExdiOptions</i>] [<b>-ee</b> {<b>masm</b>|<b>c++</b>}] <BR>   [-<b>z</b> <i>DumpFile</i>] [<b>-cf "</b><i>filename</i><b>"</b>] [<b>-cfr "</b><i>filename</i><b>"</b>] [<b>-c "</b><i>command</i><b>"</b>] <BR>   [<b>-t</b> <i>PrintErrorLevel</i>] [<b>-version</b>] <BR><BR><b>kd -iu </b><i>KeyString</i><BR><BR><b>kd -QR </b><i>Server</i> <BR><BR><b>kd -wake</b> <i>PID</i> <BR><BR><b>kd -?</b><BR></nobr></P>
<P></P>
<P></P>
<P></P>
<P>Descriptions of the KD command-line options follow. Only the <b>-remote</b> and <b>-server</b> options are case-sensitive. The initial hyphen can be replaced with a forward-slash (/). Options which do not take any additional parameters can be concatenated &#8212; so <b>kd -r -n -v</b> can be written as <b>kd -rnv</b>.</P>
<P>If the <b>-remote</b> or <b>-server</b> option is used, it must appear before any other options on the command line.</P>
<DL><H4>Parameters</H4>
<DT><b>-server</b> <i>ServerTransport</i></DT>
<DD>Creates a debugging server that can be accessed by other debuggers. For an explanation of the possible <i>ServerTransport</i>, see <a href="r08_use_remote_2cf49506-2562-4684-b843-be4726f59691.xml.htm">Activating a Debugging Server</a>. When this parameter is used, it must be the first parameters on the command line. </DD>
<DT><b>-remote</b> <i>ClientTransport</i></DT>
<DD>Creates a debugging client, and connects to a debugging server that is already running. For an explanation of the possible <i>ClientTransport</i> values, see <a href="r08_use_remote_d737f4f5-2c99-44cf-b276-0fda82be08c8.xml.htm">Activating a Debugging Client</a>. When this parameter is used, it must be the first parameters on the command line. </DD>
<DT><b>-a</b><i>Extension</i></DT>
<DD>Sets the default extension DLL. The default is <i>kdextx86.dll</i> or <i>kdexts.dll</i>. There must be no space after the "a", and the <i>.dll</i> file name extension must not be included. For details, and other methods of setting this default, see <a href="r08_use_remote_ac80d1f3-ff3f-4374-9e70-2a73b84ac647.xml.htm">Loading Debugger Extension DLLs</a>.</DD>
<DT><b>-b</b></DT>
<DD>This option has two effects:<P>1. The debugger will break into the target computer immediately upon connection.</P>
<P>2. After a reboot, the debugger will break into the target computer once the kernel is initialized. See <a href="r07_use_operation_8338d017-7a53-4d82-bd91-bd0eaebe319a.xml.htm">Crashing and Rebooting the Target Computer</a> for details and for other methods of changing this status.</P>
</DD>
<DT><b>-bonc</b></DT>
<DD>If this option is specified, the debugger will break into the target as soon as the session begins. This is especially useful when connecting to a debugging server that might not be currently broken into the target.</DD>
<DT><b>-c "</b><i>command</i><b>"</b></DT>
<DD>Specifies the initial debugger command to run at start-up. This command must be surrounded with quotation marks. Multiple commands can be separated with semicolons. (If you have a long command list, it may be easier to put them in a script and then use the <b>-c</b> option with the <a href="r15_cmds_a_85f99aae-f246-400c-8d44-625b758a0e10.xml.htm"><b>$&lt;, $&gt;&lt;, $&gt;&lt;, $$&gt;&lt; (Run Script File)</b></a> command.)   <P>If you are starting a debugging client, this command must be intended for the debugging server. Client-specific commands, such as <b>.lsrcpath</b>, are not allowed. </P>
</DD>
<DT><b>-cf "</b><i>filename</i><b>"</b></DT>
<DD>Specifies the path and name of a script file. This script file is executed as soon as the debugger is started. If <i>filename</i> contains spaces it must be enclosed in quotation marks. If the path is omitted, the current directory is assumed. If the <nobr><b>-cf</b></nobr> option is not used, the file <i>ntsd.ini</i> in the current directory is used as the script file. If the file does not exist, no error occurs. For details, see <a href="r05_use_start_1aa9e034-9f62-48a5-b48e-12b581f5d211.xml.htm">Using Script Files</a>.</DD>
<DT><b>-cfr "</b><i>filename</i><b>"</b></DT>
<DD>Specifies the path and name of a script file. This script file is executed as soon as the debugger is started, and any time the target is restarted. If <i>filename</i> contains spaces it must be enclosed in quotation marks. If the path is omitted, the current directory is assumed. If the file does not exist, no error occurs. For details, see <a href="r05_use_start_1aa9e034-9f62-48a5-b48e-12b581f5d211.xml.htm">Using Script Files</a>.</DD>
<DT><b>-clines</b><i> lines</i></DT>
<DD>Sets the approximate number of commands in the command history which can be accessed during remote debugging. For details, and for other ways to change this number, see <a href="r05_use_start_0d2d0e09-870d-4d87-a7c7-2cac43538545.xml.htm">Using Debugger Commands</a>.</DD>
<DT><b>-d</b></DT>
<DD>After a reboot, the debugger will break into the target computer as soon as a kernel module is loaded. (This break is <i>earlier</i> than the break from the <b>-b</b> option.) See <a href="r07_use_operation_8338d017-7a53-4d82-bd91-bd0eaebe319a.xml.htm">Crashing and Rebooting the Target Computer</a> for details and for other methods of changing this status.</DD>
<DT><b>-ee</b> {<b>masm</b>|<b>c++</b>}</DT>
<DD>Sets the default expression evaluator. If <b>masm</b> is specified, MASM expression syntax will be used. If <b>c++</b> is specified, C++ expression syntax will be used. If the <b>-ee</b> option is omitted, MASM expression syntax is used as the default. See <a href="r05_use_start_21325f4c-38a6-4965-821e-4f8f424a486d.xml.htm">Evaluating Expressions</a> for details.</DD>
<DT><b>-failinc</b></DT>
<DD>Causes the debugger to ignore any questionable symbols. When debugging a user-mode or kernel-mode minidump file, this option will also prevent the debugger from loading any modules whose images can't be mapped. For details and for other methods of controlling this, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#4cd85e1a-30d1-41d5-b570-ffdf1c02b441">SYMOPT_EXACT_SYMBOLS</a>.</DD>
<DT><b>-i</b> <i>ImagePath</i></DT>
<DD>Specifies the location of the executables that generated the fault. If the path contains spaces, it should be enclosed in quotation marks. For details, and for other ways to change this path, see <a href="r06_use_gui_8f9c224f-0972-4b0f-941d-cfaac48c608c.xml.htm">Executable Image Path</a>.</DD>
<DT><b>-iu </b><i>KeyString</i></DT>
<DD>Registers debugger remoting as an URL type so that users can auto-launch a debugger remote client with an URL. <i>KeyString</i> has the format <span style="cursor:text; font: 100% Courier New, Courier, mono; color: #660000;"><b>remdbgeng</b>://<i>RemotingOption</i></span>. <i>RemotingOption</i> is a string that defines the transport protocol as defined in the topic <a href="r08_use_remote_d737f4f5-2c99-44cf-b276-0fda82be08c8.xml.htm">Activating a Debugging Client</a>. If this action succeeds, no message is displayed; if it fails, an error message is displayed.<P>The <b>-iu</b> parameter must not be used with any other parameters. This command will not actually start KD.</P>
</DD>
<DT><b>-k</b> <i>ConnectType</i></DT>
<DD>Tells the debugger how to connect to the target. For details, see <a href="r03_setup_2_70b570e5-d1d6-4bde-89d7-d52b3a9f7e6d.xml.htm">Choosing Kernel Debugging Settings</a>.</DD>
<DT><b>-kl</b></DT>
<DD><i>(Windows XP and later)</i>  Starts a kernel debugging session on the same machine as the debugger. For more details, see <a href="r05_use_start_9132f269-042d-43ca-a1df-18ffc85aa4a5.xml.htm">Attaching to a Target Computer (Kernel Mode)</a>.</DD>
<DT><b>-kqm</b></DT>
<DD>Starts KD in quiet mode.</DD>
<DT><b>-kx</b> <i>ExdiOptions</i></DT>
<DD>Starts a kernel debugging session using an EXDI driver. EXDI drivers are not described in this documentation. If you have an EXDI interface to your hardware probe or hardware simulator, please contact Microsoft for debugging information.</DD>
<DT><b>-lines</b></DT>
<DD>Enables source line debugging. If this option is omitted, the <a href="r21_metacmds_l_6a615bfe-9d01-4d00-8250-23c7b95bb0ae.xml.htm"><b>.lines (Toggle Source Line Support)</b></a> command will have to be used before source debugging will be allowed. For other methods of controlling this, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#c8bce791-aa8d-4093-afba-54839a16c21a">SYMOPT_LOAD_LINES</a>.</DD>
<DT><b>-log</b>{<b>a|au|o|ou</b>} <i>LogFile</i></DT>
<DD>Begins logging information to a log file. If <i>LogFile</i> already exists, it will be overwritten if <b>-logo</b> is used, or output will be appended to the file if <b>-loga</b> is used. The <b>-logau</b> and <b>-logou</b> options operate similar to <b>-loga</b> and <b>-logo</b> respectively,  except that the log file is a Unicode file. For more details, see <a href="r06_use_gui_8de5bdb2-e273-490d-b44f-359fa85f28da.xml.htm">Keeping a Log File</a>.</DD>
<DT><b>-m</b></DT>
<DD>Indicates that the serial port is connected to a modem. Instructs the debugger to watch for the carrier-detect signal.</DD>
<DT><b>-myob</b></DT>
<DD>If there is a version mismatch with <i>dbghelp.dll</i>, the debugger will continue to run. (Without the <b>-myob</b> switch, this is considered a fatal error.)<P>A secondary effect of this option is that the warning that normally appears when breaking into the target computer is suppressed.    </P>
</DD>
<DT><b>-n</b></DT>
<DD><i>Noisy symbol load:</i> Enables verbose output from symbol handler. For details and for other methods of controlling this, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#1be46490-3471-415d-a405-14806d2de877">SYMOPT_DEBUG</a>.</DD>
<DT><b>-noio</b></DT>
<DD>Prevents the debugging server from being used for input or output. Input will only be accepted from the debugging client (plus any initial command or command script specified by the <b>-c</b> command-line option).    All output will be directed to the debugging client. For more details, see <a href="r08_use_remote_2cf49506-2562-4684-b843-be4726f59691.xml.htm">Activating a Debugging Server</a>.</DD>
<DT><b>-noshell</b></DT>
<DD>Prohibits all <b>.shell</b> commands. This prohibition will last as long as the debugger is running, even if a new debugging session is begun. For details, and for other ways to disable shell commands, see <a href="r05_use_start_f999ba17-ca66-4b05-bce4-9bc4671308e3.xml.htm">Using Shell Commands</a>.</DD>
<DT><b>-QR</b> <i>Server</i></DT>
<DD>Lists all debugging servers running on the specified network server. The double backslash (<b>\\</b>) preceding <i>Server</i> is optional. See <a href="r08_use_remote_3b069af0-5e17-48d7-864a-9b45f6ee1aa4.xml.htm">Searching for Debugging Servers</a> for details.<P>The <b>-QR</b> parameter must not be used with any other parameters. This command will not actually start KD.</P>
</DD>
<DT><b>-r</b></DT>
<DD>Displays registers.</DD>
<DT><b>-s</b></DT>
<DD>Disables lazy symbol loading. This will slow down process startup. For details and for other methods of controlling this, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#7a6eaf7e-2487-42a3-a66c-1ff0b87b2796">SYMOPT_DEFERRED_LOADS</a>.</DD>
<DT><b>-sdce</b></DT>
<DD>Causes the debugger to display <b>File access error</b> dialog boxes during symbol load. For details and for other methods of controlling this, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#50845eb8-f7c5-46d4-b4a3-8e50d42224cc">SYMOPT_FAIL_CRITICAL_ERRORS</a>.</DD>
<DT><b>-secure</b></DT>
<DD>Activates <a href="r11_security_c67f1beb-2dab-4e98-aa23-02facc89a8f1.xml.htm">Secure Mode</a>.</DD>
<DT><b>-ses</b></DT>
<DD>Causes the debugger to perform a strict evaluation of all symbol files and ignore any questionable symbols. For details and for other methods of controlling this, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#4cd85e1a-30d1-41d5-b570-ffdf1c02b441">SYMOPT_EXACT_SYMBOLS</a>.</DD>
<DT><b>-sflags 0x</b><i>Number</i></DT>
<DD>Sets all the symbol handler options at once. <i>Number</i> should be a hexadecimal number prefixed with <b>0x</b> &#8212; a decimal without the <b>0x</b> is permitted, but the symbol options are binary flags and therefore hexadecimal is recommended. This option should be used with care, since it will override all the symbol handler defaults. For details, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm">Setting Symbol Options</a>.</DD>
<DT><b>-sicv</b></DT>
<DD>Causes the symbol handler to ignore the CV record. For details and for other methods of controlling this, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#3d327ef3-57f6-4476-81ba-99f1536f6bf2">SYMOPT_IGNORE_CVREC</a>.</DD>
<DT><b>-sins</b></DT>
<DD>Causes the debugger to ignore the symbol path and executable image path environment variables. For details, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#dccc81ec-f693-4796-bac2-b62a28a55174">SYMOPT_IGNORE_NT_SYMPATH</a>.</DD>
<DT><b>-snc</b></DT>
<DD>Causes the debugger to turn off C++ translation. For details and for other methods of controlling this, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#685917f5-f74d-4929-a590-e1da0cd7bbd3">SYMOPT_NO_CPP</a>.</DD>
<DT><b>-snul</b></DT>
<DD>Disables automatic symbol loading for unqualified names. For details and for other methods of controlling this, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#8aebbb32-4c91-43af-ad23-2bdbcc7d5520">SYMOPT_NO_UNQUALIFIED_LOADS</a>.</DD>
<DT><b>-srcpath</b> <i>SourcePath</i></DT>
<DD>Specifies the source file search path. Separate multiple paths with a semicolon (<b>;</b>). If the path contains spaces, it should be enclosed in quotation marks. For details, and for other ways to change this path, see <a href="r06_use_gui_b85f4b8e-eb5f-4502-9a0e-92d84cd3d8f1.xml.htm">Source Path</a>.</DD>
<DT><b>-sup</b></DT>
<DD>Causes the symbol handler to search the public symbol table during every symbol search. For details and for other methods of controlling this, see <a href="r09_symbols_16fa1a1e-e71d-4721-b0f8-b3a09c220299.xml.htm#fa4f74ce-fe78-49dc-94cc-3070af1c8010">SYMOPT_AUTO_PUBLICS</a>.    </DD>
<DT><b>-t </b><i>PrintErrorLevel</i></DT>
<DD>Specifies the error level that will cause the debugger to display an error message. This is a decimal number equal to 0, 1, 2, or 3. The values are described as follows:<B></B><table>
<TR valign="top">
<TH Width="">Value</TH>
<TH Width="">Constant</TH>
<TH Width="">Meaning</TH>
</TR>
<TR valign="top">
<TD Width="">0</TD>
<TD Width="">NONE</TD>
<TD Width="">Do not display any errors.</TD>
</TR>
<TR valign="top">
<TD Width="">1</TD>
<TD Width="">ERROR</TD>
<TD Width="">Display ERROR level debugging events.</TD>
</TR>
<TR valign="top">
<TD Width="">2</TD>
<TD Width="">MINORERROR</TD>
<TD Width="">Display MINORERROR and ERROR level debugging events.</TD>
</TR>
<TR valign="top">
<TD Width="">3</TD>
<TD Width="">WARNING</TD>
<TD Width="">Display WARNING, MINORERROR, and ERROR level debugging events.</TD>
</TR>
</table>
<P></P>
<P>This error level only has meaning in checked builds of Microsoft Windows. The default value is 1.</P>
</DD>
<DT><b>-v</b></DT>
<DD>Generates verbose messages for loads, deferred loads, and unloads. </DD>
<DT><b>-version</b></DT>
<DD>Prints the debugger version string.</DD>
<DT><b>-wake</b> <i>PID</i></DT>
<DD>Causes sleep mode to end for the user-mode debugger whose process ID is specified by <i>PID</i>. This command must be issued on the target machine during sleep mode. See <a href="r05_use_start_9fcf66d7-d72a-4b94-a1e6-e65a95e688f7.xml.htm">Controlling the User-Mode Debugger from the Kernel Debugger</a> for details.<P>The <b>-wake</b> parameter must not be used with any other parameters. This command will not actually start KD. </P>
</DD>
<DT><b>-x</b></DT>
<DD>Causes the debugger to break in when an exception first occurs, rather than letting the application or module that caused the exception deal with it. (Same as <b>-b</b>, except with an initial <b>eb nt!NtGlobalFlag 9;g</b> command.)</DD>
<DT><b>-y</b> <i>SymbolPath</i></DT>
<DD>Specifies the symbol search path. Separate multiple paths with a semicolon (<b>;</b>). If the path contains spaces, it should be enclosed in quotation marks. For details, and for other ways to change this path, see <a href="r06_use_gui_b967bbbf-bd93-420d-b653-e8aac55a402c.xml.htm">Symbol Path</a>.</DD>
<DT><b>-z</b> <i>DumpFile</i></DT>
<DD>Specifies the name of a crash dump file to debug. If the path and file name contain spaces, this must be surrounded by quotation marks. It is possible to open several dump files at once by including multiple <b>-z</b> options, each followed by a different <i>DumpFile</i> value. For details, see <a href="r10_dump_files_ab12dbc9-be98-4005-83dc-e8103d58344a.xml.htm">Analyzing a Kernel-Mode Dump File with KD</a>.</DD>
<DT><b>-zp</b> <i>PageFile</i></DT>
<DD>Specifies the name of a modified page file. This is useful if you are debugging a dump file and want to use the <a href="r21_metacmds_l_f15dd6af-7557-480e-be99-2a30030f6758.xml.htm"><b>.pagein (Page In Memory)</b></a> command. You cannot use <b>-zp</b> with a standard Windows page file &#8212; only specially-modified page files can be used.    </DD>
<DT><b>-?</b></DT>
<DD>Displays command-line help text.<P></P>
<P>KD will automatically detect the platform on which the target is running. You do not need to specify the target on the KD command line. The older syntax (using the name <i>I386KD</i> or <i>IA64KD</i>) is obsolete.</P>
<P></P>
<P></P>
</DD>
</DL>
<DIV style="display:yes"></DIV>
<DIV CLASS="footer"><br><A href="dbglegal.htm">© 2009 Microsoft Corporation</A><br><A href="mailto:windbgfb@microsoft.com?subject=documentation feedback [Debugger]: KD Command-Line Options RELEASE: (December 09, 2009)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AThe WDK team uses the feedback submitted to improve the WDK documentation. We do not use your e-mail address for any other purpose. We will remove your e-mail address from our system after the issue you are reporting has been resolved. While we are working to resolve this issue, we may send you an e-mail message to request more information about your feedback. After the issues have been addressed, we may send you an e-mail message to let you know that your feedback has been addressed.%0A%0AFor more information about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx.
              ">Send feedback on this topic</A><br>Debugging Tools for Windows<br>December 09, 2009<br></DIV>
</Body>
</HTML>
