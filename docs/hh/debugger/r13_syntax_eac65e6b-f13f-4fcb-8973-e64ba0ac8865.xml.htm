<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><HTML DIR="LTR" xmlns:MSHelp="http://msdn.microsoft.com/MSHelp">
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>MASM Numbers and Operators</TITLE>
<META NAME="ms.locale" content="en-us">
<META NAME="DESCRIPTION" CONTENT="Debugger, Debugger, Design Guide, MASM Numbers and Operators"><xml><MSHelp:Keyword Index="A" Term="r13_syntax_eac65e6b-f13f-4fcb-8973-e64ba0ac8865.xml"/>
<META NAME="MS-HKWD" CONTENT="expressions, MASM expression syntax">
<META NAME="MS-HKWD" CONTENT="numerical expressions (MASM)">
<META NAME="MS-HKWD" CONTENT="MASM expressions, numbers">
<META NAME="MS-HKWD" CONTENT="MASM expressions, operators">
<META NAME="MS-HKWD" CONTENT="operators (MASM)">
<META NAME="MS-HKWD" CONTENT="@@ (MASM prefix)">
<META NAME="MS-HKWD" CONTENT="binary operators">
<META NAME="MS-HKWD" CONTENT="shift operators">
<META NAME="MS-HKWD" CONTENT="unary operators">
<META NAME="MS-HKWD" CONTENT="and operator">
<META NAME="MS-HKWD" CONTENT="mod operator">
<META NAME="MS-HKWD" CONTENT="or operator">
<META NAME="MS-HKWD" CONTENT="xor operator">
<META NAME="MS-HKWD" CONTENT="by operator">
<META NAME="MS-HKWD" CONTENT="dwo operator">
<META NAME="MS-HKWD" CONTENT="hi operator">
<META NAME="MS-HKWD" CONTENT="low operator">
<META NAME="MS-HKWD" CONTENT="not operator">
<META NAME="MS-HKWD" CONTENT="poi operator">
<META NAME="MS-HKWD" CONTENT="qwo operator">
<META NAME="MS-HKWD" CONTENT="wo operator">
<META NAME="MS-HKWD" CONTENT="$pby operator">
<META NAME="MS-HKWD" CONTENT="$pwo operator">
<META NAME="MS-HKWD" CONTENT="$pdwo operator">
<META NAME="MS-HKWD" CONTENT="$pqwo operator">
<META NAME="MS-HKWD" CONTENT="$ppoi operator">
<META NAME="MS-HKWD" CONTENT="$fnsucc operator">
<META NAME="MS-HKWD" CONTENT="$scmp operator">
<META NAME="MS-HKWD" CONTENT="$sicmp operator">
<META NAME="MS-HKWD" CONTENT="$spat operator">
<META NAME="MS-HKWD" CONTENT="$vvalid operator">
<META NAME="MS-HKWD" CONTENT="$iment operator">
<META NAME="MS-HKWD" CONTENT="0n prefix">
<META NAME="MS-HKWD" CONTENT="0t prefix">
<META NAME="MS-HKWD" CONTENT="0x prefix">
<META NAME="MS-HKWD" CONTENT="0y prefix">
<META NAME="MS-HKWD" CONTENT="base 10 prefix (0n)">
<META NAME="MS-HKWD" CONTENT="base 16 prefix (0x)">
<META NAME="MS-HKWD" CONTENT="base 2 prefix (0y)">
<META NAME="MS-HKWD" CONTENT="base 8 prefix (0t)">
<META NAME="MS-HKWD" CONTENT="binary prefix (0y)">
<META NAME="MS-HKWD" CONTENT="decimal prefix (0n)">
<META NAME="MS-HKWD" CONTENT="hexadecimal prefix (0x)">
<META NAME="MS-HKWD" CONTENT="octal prefix (0t)"></xml><LINK REL="stylesheet" type="text/css" href="backsdk4.css"><SCRIPT src="langref.js"></SCRIPT><style>dd {margin-bottom:0em; margin-left:1.9em; }</style>
<style>.divclass {behavior:url(#default#savehistory);}</style>
<META NAME="save" CONTENT="history">
</HEAD>
<Body topmargin="0">
<DIV STYLE="display:none;"></DIV>
<DIV STYLE="display:none;"></DIV>
<TABLE CLASS="buttonbarshade" CELLSPACING="0" border="0"><TR><TD NOWRAP="true"> </TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING="0">
<TR ID="hdr">
<TD NOWRAP="true" CLASS="runninghead">Debugging Tools for Windows</TD>
</TR>
</TABLE>
<H1><A NAME="r13_syntax_eac65e6b-f13f-4fcb-8973-e64ba0ac8865.xml"></A>MASM Numbers and Operators</H1>
<P>Before version 4.0 of the Debugging Tools for Windows package, NTSD, CDB, KD, and WinDbg used only Microsoft Macro Assembler (MASM) expression syntax.</P>
<H4>Numbers in MASM Expressions</H4>
<P>You can put numbers in MASM expressions in base 16, 10, 8, or 2.</P>
<P>Use the <a href="r17_cmds_i_d2b1e43f-2f4b-4746-b038-0b360a63e458.xml.htm"><b>n (Set Number Base)</b></a> command to set the default radix to 16, 10, or 8. All unprefixed numbers are then interpreted in this base. You can override the default radix by specifying the <b>0x</b> prefix (hexadecimal), the <b>0n</b> prefix (decimal), the <b>0t</b> prefix (octal), or the <b>0y</b> prefix (binary). </P>
<P>You can also specify hexadecimal numbers by adding an <b>h</b> after the number. You can use uppercase or lowercase letters within numbers. For example, "0x4AB3", "0X4aB3", "4AB3h", "4ab3h", and "4aB3H" have the same meaning.</P>
<P>If you do not add a number after the prefix in an expression, the number is read as 0.  Therefore, you can write 0 as 0, the prefix followed by 0, and only the prefix.  For example, in hexadecimal, "0", "0x0", and "0x" have the same meaning.  </P>
<P></P>
<P>You can enter hexadecimal 64-bit values in the <b>xxxxxxxx`xxxxxxxx</b> format. You can also omit the grave accent ( <b>` </b>). If you include the grave accent, <a href="r13_syntax_fab581c5-bc83-4c7a-80b0-828deb1ffb83.xml.htm">automatic sign extension</a> is disabled.</P>
<H4>Symbols in MASM Expressions</H4>
<P>In MASM expressions, the numeric value of any symbol is its memory address. Depending on what the symbol refers to, this address is the address of a global variable, local variable, function, segment, module, or any other recognized label.</P>
<P>To specify which module the address is associated with, include the module name and an exclamation point ( <b>!</b> ) before the name of the symbol. If the symbol could be interpreted as a hexadecimal number, include the module name and an exclamation point, or just an exclamation point, before the symbol name. For more information about symbol recognition, see <a href="r09_symbols_6e5fcfbf-08a6-481b-9df4-23e19ee7559d.xml.htm">Symbol Syntax and Symbol Matching</a>.</P>
<P>Use two colons ( <b>::</b> ) or two underscores ( <b>__</b> ) to indicate the members of a class.</P>
<P>Use a grave accent ( <b>`</b> ) or an apostrophe ( <b>'</b> ) in a symbol name only if you add a module name and exclamation point before the symbol.</P>
<H4>Numeric Operators in MASM Expressions</H4>
<P>You can modify any component of an expression by using a unary operator. You can combine any two components by using a binary operator. Unary operators take precedence over binary operators. When you use multiple binary operators, the operators follow the fixed precedence rules that are described in the following tables.</P>
<P>You can always use parentheses to override precedence rules.</P>
<P>If part of an MASM expression is enclosed in parentheses and two at signs (<b>@@</b>) appear before the expression, the expression is interpreted according to <a href="r13_syntax_372599d3-a780-4c57-9219-05575c604059.xml.htm">C++ expression rules</a>. You cannot add a space between the two at signs and the opening parenthesis. You can also specify the <a href="r05_use_start_21325f4c-38a6-4965-821e-4f8f424a486d.xml.htm">expression evaluator</a> by using <b>@@c++( ... )</b> or <b>@@masm( ... )</b>.</P>
<P>When you perform arithmetic computations, the MASM expression evaluator treats all numbers and symbols as ULONG64 types.</P>
<P>Unary address operators assume DS as the default segment for addresses. Expressions are evaluated in order of operator precedence. If adjacent operators have equal precedence, the expression is evaluated from left to right.</P>
<P>You can use the following unary operators.</P><B></B><table>
<TR valign="top">
<TH Width="">Operator</TH>
<TH Width="">Meaning</TH>
</TR>
<TR valign="top">
<TD Width=""><b>+</b></TD>
<TD Width="">Unary plus</TD>
</TR>
<TR valign="top">
<TD Width=""><b>-</b></TD>
<TD Width="">Unary minus</TD>
</TR>
<TR valign="top">
<TD Width=""><b>not</b></TD>
<TD Width="">Returns 1 if the argument is zero. Returns zero for any nonzero argument.    </TD>
</TR>
<TR valign="top">
<TD Width=""><b>hi</b></TD>
<TD Width="">High 16 bits</TD>
</TR>
<TR valign="top">
<TD Width=""><b>low</b></TD>
<TD Width="">Low 16 bits</TD>
</TR>
<TR valign="top">
<TD Width=""><b>by</b></TD>
<TD Width="">Low-order byte from the specified address.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>$pby</b></TD>
<TD Width="">Same as <b>by</b> except that it takes a physical address. Only physical memory that uses the default caching behavior can be read. </TD>
</TR>
<TR valign="top">
<TD Width=""><b>wo</b></TD>
<TD Width="">Low-order word from the specified address.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>$pwo</b></TD>
<TD Width="">Same as <b>wo</b> except that it takes a physical address. Only physical memory that uses the default caching behavior can be read. </TD>
</TR>
<TR valign="top">
<TD Width=""><b>dwo</b></TD>
<TD Width="">Double-word from the specified address.       </TD>
</TR>
<TR valign="top">
<TD Width=""><b>$pdwo</b></TD>
<TD Width="">Same as <b>dwo</b> except that it takes a physical address. Only physical memory that uses the default caching behavior can be read. </TD>
</TR>
<TR valign="top">
<TD Width=""><b>qwo</b></TD>
<TD Width="">Quad-word from the specified address.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>$pqwo</b></TD>
<TD Width="">Same as <b>qwo</b> except that it takes a physical address. Only physical memory that uses the default caching behavior can be read. </TD>
</TR>
<TR valign="top">
<TD Width=""><b>poi</b></TD>
<TD Width="">Pointer-sized data from the specified address. The pointer size is 32 bits or 64 bits. In kernel debugging, this size is based on the processor of the <i>target</i> computer. In user-mode debugging on an Itanium-based computer, this size is 32 bits or 64 bits, depending on the target application. Therefore, <b>poi</b> is the best operator to use if you want pointer-sized data.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>$ppoi</b></TD>
<TD Width="">Same as <b>poi</b> except that it takes a physical address. Only physical memory that uses the default caching behavior can be read. </TD>
</TR>
</table>
<P></P>
<P>You can use the following binary operators. The operators in each cell take precedence over those in lower cells. Operators in the same cell are of the same precedence and are parsed from left to right.</P><B></B><table>
<TR valign="top">
<TH Width="">Operator</TH>
<TH Width="">Meaning</TH>
</TR>
<TR valign="top">
<TD Width=""><b>*</b> <BR><BR><b>/</b> <BR><BR><b>mod</b> (or <b>%</b>)<BR><BR></TD>
<TD Width="">Multiplication<BR><BR>Integer division<BR><BR>Modulus (remainder)<BR><BR></TD>
</TR>
<TR valign="top">
<TD Width=""><b>+</b> <BR><BR><b>-</b> <BR><BR></TD>
<TD Width="">Addition<BR><BR>Subtraction<BR><BR></TD>
</TR>
<TR valign="top">
<TD Width=""><b>&lt;&lt;</b> <BR><BR><b>&gt;&gt;</b> <BR><BR><b>&gt;&gt;&gt;</b> <BR><BR></TD>
<TD Width="">Left shift<BR><BR>Logical right shift<BR><BR>Arithmetic right shift<BR><BR></TD>
</TR>
<TR valign="top">
<TD Width=""><b>=</b> (or <b>==</b>)<BR><BR><b>&lt;</b> <BR><BR><b>&gt;</b> <BR><BR><b>&lt;=</b> <BR><BR><b>&gt;=</b> <BR><BR><b>!=</b> <BR><BR></TD>
<TD Width="">Equal to<BR><BR>Less than<BR><BR>Greater than<BR><BR>Less than or equal to<BR><BR>Greater than or equal to<BR><BR>Not equal to<BR><BR></TD>
</TR>
<TR valign="top">
<TD Width=""><b>and</b> (or <b>&amp;</b>)</TD>
<TD Width="">Bitwise AND</TD>
</TR>
<TR valign="top">
<TD Width=""><b>xor</b> (or <b>^</b>)</TD>
<TD Width="">Bitwise XOR (exclusive OR)</TD>
</TR>
<TR valign="top">
<TD Width=""><b>or</b> (or <b>|</b>)</TD>
<TD Width="">Bitwise OR</TD>
</TR>
</table>
<P></P>
<P></P>
<P>The <b>&lt;</b>, <b>&gt;</b>, <b>=</b>, <b>==</b>, and <b>!=</b> comparison operators evaluate to 1 if the expression is true or zero if the expression is false. A single equal sign (=) is the same as a double equal sign (==). You cannot use side effects or assignments within a MASM expression.</P>
<P>An invalid operation (such as division by zero) results in an "Operand error" is returned to the <a href="r36_gui_1_7e0ce62e-7ce9-4b61-9fa8-06a775d1e8ba.xml.htm">Debugger Command window</a>.</P>
<H4>Non-Numeric Operators in MASM Expressions</H4>
<P>You can also use the following additional operators in MASM expressions.</P><B></B><table>
<TR valign="top">
<TH Width="">Operator</TH>
<TH Width="">Meaning</TH>
</TR>
<TR valign="top">
<TD Width=""><b>$fnsucc(</b><i>FnAddress</i>, <i>RetVal</i>, <i>Flag</i><b>)</b></TD>
<TD Width="">Interprets the <i>RetVal</i> value as a return value for the function that is located at the <i>FnAddress </i>address. If this return value qualifies as a success code, <b>$fnsucc</b> returns TRUE. Otherwise, <b>$fnsucc</b> returns FALSE.<BR><BR>If the return type is BOOL, bool, HANDLE, HRESULT, or NTSTATUS, <b>$fnsucc</b> correctly understands whether the specified return value qualifies as a success code.  If the return type is a pointer, all values other than NULL qualify as success codes.  For any other type, success is defined by the value of <i>Flag</i>.  If <i>Flag</i> is 0, a nonzero value of <i>RetVal</i> is success. If <i>Flag</i> is 1, a zero value of <i>RetVal</i> is success.<BR><BR></TD>
</TR>
<TR valign="top">
<TD Width=""><b>$iment (</b><i>Address</i><b>)</b></TD>
<TD Width="">Returns the address of the image entry point in the loaded module list.  <i>Address </i>specifies the Portable Executable (PE) image base address.  The entry is found by looking up the image entry point in the PE image header of the image that <i>Address</i> specifies.  <BR><BR>You can use this function for both modules that are already in the module list and to set <a href="r07_use_operation_3a87f521-a016-43a6-bc5f-820bfd4fa0c4.xml.htm">unresolved breakpoints</a> by using the <a href="r15_cmds_a_76c9b5bf-1e1a-4257-8bd4-4b00e2840523.xml.htm"><b>bu</b></a> command.<BR><BR></TD>
</TR>
<TR valign="top">
<TD Width=""><b>$scmp("</b><i>String1</i><b>", "</b><i>String2</i><b>")</b></TD>
<TD Width="">Evaluates to &#8211;1, 0, or 1, like the <b>strcmp </b>C function.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>$sicmp("</b><i>String1</i><b>", "</b><i>String2</i><b>")</b></TD>
<TD Width="">Evaluates to &#8211;1, 0, or 1, like the <b>stricmp </b>Microsoft Win32 function .</TD>
</TR>
<TR valign="top">
<TD Width=""><b>$spat("</b><i>String</i><b>", "</b><i>Pattern</i><b>")</b></TD>
<TD Width="">Evaluates to TRUE or FALSE depending on whether <i>String</i> matches <i>Pattern</i>. <i>Pattern</i> can contain a variety of wildcard characters and specifiers. For more information about the syntax, see <a href="r13_syntax_c980a67c-f2d7-495d-8675-2763584a1516.xml.htm">String Wildcard Syntax</a>.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>$vvalid(</b><i>Address</i><b>, </b><i>Length</i><b>)</b></TD>
<TD Width="">Determines whether the memory range that begins at <i>Address</i> and extends for <i>Length</i> bytes is valid. If the memory is valid, <b>$vvalid</b> evaluates to 1. If the memory is invalid, <b>$vvalid</b> evaluates to 0.</TD>
</TR>
</table>
<P></P>
<H4>Registers and Pseudo-Registers in MASM Expressions</H4>
<P>You can use registers and pseudo-registers within MASM expressions. You can add an at sign (<b>@</b>) before all registers and pseudo-registers. The at sign causes the debugger to access the value more quickly. This at sign is unnecessary for the most common x86-based registers. For other registers and pseudo-registers, we recommend that you add the at sign, but it is not actually <i>required</i>. If you omit the at sign for the less common registers, the debugger tries to parse the text as a hexadecimal number, then as a symbol, and finally as a register.</P>
<P>You can also use a period ( <b>.</b> ) to indicate the current instruction pointer. You should not add an at sign before this period, and you cannot use a period as the first parameter of the <a href="r17_cmds_i_68e6eb67-255f-4e2b-8017-183bb0be5f58.xml.htm"><b>r</b> command</a>. This period has the same meaning as the <b>$ip</b> pseudo-register.</P>
<P>For more  information about registers and pseudo-registers, see <a href="r13_syntax_8242fa24-3682-487d-99d6-4aa7ef8d9bf8.xml.htm">Register Syntax</a> and <a href="r13_syntax_c05da1f3-3310-46cb-8e56-da3d670e05f3.xml.htm">Pseudo-Register Syntax</a>.</P>
<H4>Source Line Numbers in MASM Expressions</H4>
<P>You can use source file and line number expressions within MASM expressions. You must enclose these expressions by using grave accents ( <b>` </b>). For more information about the syntax, see <a href="r13_syntax_01fe3d5e-b319-4199-9143-d7676bc32279.xml.htm">Source Line Syntax</a>.</P>
<DIV style="display:yes"></DIV>
<DIV CLASS="footer"><br><A href="dbglegal.htm">© 2009 Microsoft Corporation</A><br><A href="mailto:windbgfb@microsoft.com?subject=documentation feedback [Debugger]: MASM Numbers and Operators RELEASE: (December 09, 2009)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AThe WDK team uses the feedback submitted to improve the WDK documentation. We do not use your e-mail address for any other purpose. We will remove your e-mail address from our system after the issue you are reporting has been resolved. While we are working to resolve this issue, we may send you an e-mail message to request more information about your feedback. After the issues have been addressed, we may send you an e-mail message to let you know that your feedback has been addressed.%0A%0AFor more information about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx.
              ">Send feedback on this topic</A><br>Debugging Tools for Windows<br>December 09, 2009<br></DIV>
</Body>
</HTML>
