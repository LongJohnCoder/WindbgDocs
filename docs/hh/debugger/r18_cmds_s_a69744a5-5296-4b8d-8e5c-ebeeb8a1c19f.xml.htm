<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><HTML DIR="LTR" xmlns:MSHelp="http://msdn.microsoft.com/MSHelp">
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<TITLE>wt (Trace and Watch Data)</TITLE>
<META NAME="ms.locale" content="en-us">
<META NAME="DESCRIPTION" CONTENT="Debugger, Debugger, Design Guide, wt (Trace and Watch Data)"><xml><MSHelp:Keyword Index="A" Term="r18_cmds_S_a69744a5-5296-4b8d-8e5c-ebeeb8a1c19f.xml"/>
<META NAME="MS-HKWD" CONTENT="wt (Trace and Watch Data) command">
<META NAME="MS-HKWD" CONTENT="Trace and Watch Data (wt) command">
<META NAME="MS-HKWD" CONTENT="controlling the target, Trace and Watch Data (wt) command"></xml><LINK REL="stylesheet" type="text/css" href="backsdk4.css"><SCRIPT src="langref.js"></SCRIPT><style>dd {margin-bottom:0em; margin-left:1.9em; }</style>
<style>.divclass {behavior:url(#default#savehistory);}</style>
<META NAME="save" CONTENT="history">
</HEAD>
<Body topmargin="0">
<DIV STYLE="display:none;"></DIV>
<DIV STYLE="display:none;"></DIV>
<TABLE CLASS="buttonbarshade" CELLSPACING="0" border="0"><TR><TD NOWRAP="true"> </TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING="0">
<TR ID="hdr">
<TD NOWRAP="true" CLASS="runninghead">Debugging Tools for Windows</TD>
</TR>
</TABLE>
<H1><A NAME="r18_cmds_S_a69744a5-5296-4b8d-8e5c-ebeeb8a1c19f.xml"></A>wt (Trace and Watch Data)</H1>
<P>The <b>wt</b> command runs through the whole function and then displays statistics, when you execute this command at the beginning of a function call.</P>
<H4>Syntax</H4>
<P></P>
<P style="background:#dddddd;cursor:text;padding:2pt,4pt;font: 100% Courier New, Courier, mono;"><nobr><b>wt</b> [<i>WatchOptions</i>] [= <i>StartAddress</i>] [<i>EndAddress</i>] <BR></nobr></P>
<P></P>
<P></P>
<DL><H4>Parameters</H4>
<DT><i>WatchOptions</i></DT>
<DD>Specifies how to modify the display. You can use any of the following options.<B></B><table>
<TR valign="top">
<TH Width="">Option</TH>
<TH Width="">Effect</TH>
</TR>
<TR valign="top">
<TD Width=""><b>-l</b> <i>Depth</i> </TD>
<TD Width=""><i>(User mode only)</i>  Specifies the maximum depth of the calls to display. Any calls that are at least <i>Depth</i> levels deeper than the starting point are executed silently.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>-m</b> <i>Module</i> </TD>
<TD Width=""><i>(User mode only)</i>  Restricts the display to code inside the specified module, plus the first level of calls made from that module. You can include multiple <nobr><b>-m</b></nobr> options to display code from multiple modules and no other modules.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>-i</b> <i>Module</i> </TD>
<TD Width=""><i>(User mode only)</i>  Ignores any code within the specified module. You can include multiple <nobr><b>-i</b></nobr> options to ignore code from multiple modules. If you use a <nobr><b>-m</b></nobr> option, the debugger ignores all <nobr><b>-i</b></nobr> options.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>-ni</b></TD>
<TD Width=""><i>(User mode only)</i>  Does not display any entry into code that is being ignored because of an <nobr><b>-m</b></nobr> or <nobr><b>-i</b></nobr> option.  </TD>
</TR>
<TR valign="top">
<TD Width=""><b>-nc</b></TD>
<TD Width="">Does not display individual call information.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>-ns</b></TD>
<TD Width="">Does not display summary information.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>-nw</b></TD>
<TD Width="">Does not display warnings during the trace.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>-oa</b></TD>
<TD Width=""><i>(User mode only)</i>  Displays the actual address of call sites.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>-or</b></TD>
<TD Width=""><i>(User mode only)</i>  Displays the return register values of the called function, using the default radix as the base.</TD>
</TR>
<TR valign="top">
<TD Width=""><b>-oR</b></TD>
<TD Width=""><i>(User mode only)</i>  Displays the return register values of the called function, in the appropriate type for each return value.</TD>
</TR>
</table>
<P></P>
</DD>
<DT><i>StartAddress</i></DT>
<DD>Specifies the address where the debugger begins execution. If you do not use <i>StartAddress</i>, execution begins at the instruction that the instruction pointer points to. For more information about the syntax, see <a href="r13_syntax_d9e99810-a9ef-46fa-8706-76bbdb7e5609.xml.htm">Address and Address Range Syntax</a>.</DD>
<DT><i>EndAddress</i></DT>
<DD>Specifies the address where tracing ends. If you do not use <i>EndAddress</i>, a single instruction or function call is executed.</DD>
</DL>
<H4>Environment</H4><B></B><table>
<TR valign="top">
<TD Width=""><b>Modes</b></TD>
<TD Width="">User mode, kernel mode</TD>
</TR>
<TR valign="top">
<TD Width=""><b>Targets </b></TD>
<TD Width="">Live debugging only</TD>
</TR>
<TR valign="top">
<TD Width=""><b>Platforms</b><BR><b> </b></TD>
<TD Width=""><i>User mode:</i>  all <BR><i>Kernel mode:</i>  x86-based only </TD>
</TR>
</table>
<P></P>
<H4>Comments</H4>
<P>The <b>wt</b> command is useful if you want information about the behavior of a specific function, but you do not want to step through the function. Instead, go to the beginning of that function and then issue the <b>wt</b> command.</P>
<P>If the program counter is at a point that corresponds to a symbol (such as the beginning of a function or entry point into a module), the <b>wt</b> command traces until it reaches the current return address. If the program counter is on a <b>call</b> instruction, the <b>wt </b>command traces until it returns to the current location. This tracing is profiled in the <a href="r36_gui_1_7e0ce62e-7ce9-4b61-9fa8-06a775d1e8ba.xml.htm">Debugger Command window</a> together with output that describes the various calls that the command encounters.</P>
<P>If the <b>wt</b> command is issued somewhere other than the beginning of a function, the command behaves like the <a href="r17_cmds_i_169c2b2f-7f47-4e0a-85a9-506f151f0a8f.xml.htm"><b>p (Step)</b></a> command. However, if you specify <i>EndAddress</i>, execution continues until that address is reached, even if this execution involves many program steps and function calls.</P>
<P>When you are debugging in source mode, you should trace into the function only to the point where you see the opening bracket of the function body. Then, you can use the <b>wt</b> command. (It is typically easier to insert a breakpoint at the first line of the function, or use <a href="r37_gui_2_bcb62bb5-2c9c-4313-b0b5-ee2d28257632.xml.htm"><b>Debug | Run to Cursor</b></a>, and then use the <b>wt</b> command.)</P>
<P>Because the output from <b>wt</b> can be long, you might want to use a log file to record your output. For more information about log files, see <a href="r06_use_gui_8de5bdb2-e273-490d-b44f-359fa85f28da.xml.htm">Keeping a Log File</a>.</P>
<P>The following example shows a typical log file.</P>
<P></P>
<P style="cursor:text; padding:2pt,4pt;font: 100% Courier New, Courier, mono; color: #660000;"><nobr>0:000&gt; <b>l+                  </b><i>Source options set to show source lines</i><BR>Source options are f:<BR>     1/t - Step/trace by source line<BR>     2/l - List source line for LN and prompt<BR>     4/s - List source code at prompt<BR>     8/o - Only show source code at prompt<BR>0:000&gt; <b>p</b><i>                   Not yet at the function call: use "p"</i><BR>&gt;  44:       minorVariableOne = 12;<BR>0:000&gt; <b>p</b><BR>&gt;  45:       variableOne = myFunction(2, minorVariable);<BR>0:000&gt; <b>t              </b><i>     At the function call: now use "t"</i><BR>MyModule!ILT+10(_myFunction):<BR>0040100f e9cce60000      jmp     MyModule!myFunction (0040f6e0)<BR>0:000&gt; <b>t</b><BR>&gt;  231:    { <BR>0:000&gt; <b>wt</b><i>                  At the function beginning:  now use "wt"</i><BR>Tracing MyModule!myFunction to return address 00401137<BR><BR>  105     0 [  0] MyModule!myFunction<BR>    1     0 [  1]   MyModule!ILT+1555(_printf)<BR>    9     0 [  1]   MyModule!printf<BR>    1     0 [  2]     MyModule!ILT+370(__stbuf)<BR>   11     0 [  2]     MyModule!_stbuf<BR>    1     0 [  3]       MyModule!ILT+1440(__isatty)<BR>   14     0 [  3]       MyModule!_isatty<BR>   50    15 [  2]     MyModule!_stbuf<BR>   17    66 [  1]   MyModule!printf<BR>    1     0 [  2]     MyModule!ILT+980(__output)<BR>   59     0 [  2]     MyModule!_output<BR>   39     0 [  3]       MyModule!write_char<BR>  111    39 [  2]     MyModule!_output<BR>   39     0 [  3]       MyModule!write_char<BR><BR>....<BR><BR>   11     0 [  5]           kernel32!__SEH_epilog4<BR>   54 11675 [  4]         kernel32!ReadFile<BR>  165 11729 [  3]       MyModule!_read<BR>  100 11895 [  2]     MyModule!_filbuf<BR>   91 11996 [  1]   MyModule!fgets<BR>54545 83789 [  0] MyModule!myFunction<BR>    1     0 [  1]   MyModule!ILT+1265(__RTC_CheckEsp)<BR>    2     0 [  1]   MyModule!_RTC_CheckEsp<BR>54547 83782 [  0] MyModule!myFunction<BR><BR>112379 instructions were executed in 112378 events (0 from other threads)<BR><BR>Function Name                               Invocations MinInst MaxInst AvgInst<BR>MyModule!ILT+1265(__RTC_CheckEsp)                     1       1       1       1<BR>MyModule!ILT+1440(__isatty)                          21       1       1       1<BR>MyModule!ILT+1540(__ftbuf)                           21       1       1       1<BR>....<BR>ntdll!memcpy                                         24       1      40      19<BR>ntdll!memset                                          2      29      29      29<BR><BR>23 system calls were executed<BR><BR>Calls  System Call<BR>   23  ntdll!KiFastSystemCall<BR></nobr></P>
<P>In the listing of the trace, the first number specifies the number of instructions that were executed, the second number specifies the number of instructions executed by child processes of the function, and the third number (in brackets) specifes the depth of the function in the stack (taking the initial function as zero). The indentation of the function name shows the call depth.</P>
<P>In the preceding example, <b>MyModule!myFunction</b> executes 105 instructions before it calls several subroutines, including <b>printf</b> and <b>fgets</b>, and then executes 54545 additional instructions after calling those functions, but before issuing a few more calls. However, in the final count, the display shows that <b>myFunction</b> executes 112,379 instructions, because this count includes all of the instructions that <b>myFunction</b> and its children execute. (The <i>children</i> of <b>myFunction</b> are functions that are called from <b>myFunction</b>, either directly or indirectly.)</P>
<P>In the preceding example, note also that <b>ILT+1440 (__isatty)</b> is called 21 times. In the final count, the summary of this function's behavior shows the number of times that it was called, the smallest number of instructions in any single execution, the largest number of instructions in any single execution, and the average number of instructions per execution.</P>
<P>If any system calls are made, they appear in the counter and are listed again at the end of the command output.</P>
<P></P>
<H4>Additional Information</H4>
<P>For more information about issuing the <b>wt</b> command and an overview of related commands, see <a href="r07_use_operation_eb5e303d-aaf6-4005-9617-f53d9a7b344e.xml.htm">Controlling the Target</a>. </P>
<P></P>
<DIV style="display:yes"></DIV>
<DIV CLASS="footer"><br><A href="dbglegal.htm">© 2009 Microsoft Corporation</A><br><A href="mailto:windbgfb@microsoft.com?subject=documentation feedback [Debugger]: wt (Trace and Watch Data) RELEASE: (December 09, 2009)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AThe WDK team uses the feedback submitted to improve the WDK documentation. We do not use your e-mail address for any other purpose. We will remove your e-mail address from our system after the issue you are reporting has been resolved. While we are working to resolve this issue, we may send you an e-mail message to request more information about your feedback. After the issues have been addressed, we may send you an e-mail message to let you know that your feedback has been addressed.%0A%0AFor more information about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx.
              ">Send feedback on this topic</A><br>Debugging Tools for Windows<br>December 09, 2009<br></DIV>
</Body>
</HTML>
